"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.FormDataHelper = void 0;
// framework/src/utils/FormDataHelper.ts
const DataStore_1 = require("./DataStore");
const TestDataGenerator_1 = require("./TestDataGenerator");
/**
 * Form Data Helper - Utility for managing form data with DataStore
 *
 * This helper provides convenient methods for storing and retrieving
 * form data generated by TestDataGenerator in the DataStore.
 */
class FormDataHelper {
    /**
     * Generate and store a complete set of form data
     * @param prefix - Optional prefix for storage keys (default: 'formData')
     * @returns The generated form data object
     */
    static generateAndStore(prefix = 'formData') {
        const firstName = TestDataGenerator_1.TestDataGenerator.firstName();
        const lastName = TestDataGenerator_1.TestDataGenerator.lastName();
        const companyName = TestDataGenerator_1.TestDataGenerator.companyName();
        const email = TestDataGenerator_1.TestDataGenerator.email({ first: firstName, last: lastName });
        const phone = TestDataGenerator_1.TestDataGenerator.phone();
        const formData = {
            firstName,
            lastName,
            companyName,
            email,
            phone,
            fullName: `${firstName} ${lastName}`,
            generatedAt: new Date().toISOString()
        };
        // Store individual fields
        DataStore_1.dataStore.setValue(`${prefix}.firstName`, firstName);
        DataStore_1.dataStore.setValue(`${prefix}.lastName`, lastName);
        DataStore_1.dataStore.setValue(`${prefix}.companyName`, companyName);
        DataStore_1.dataStore.setValue(`${prefix}.email`, email);
        DataStore_1.dataStore.setValue(`${prefix}.phone`, phone);
        DataStore_1.dataStore.setValue(`${prefix}.fullName`, formData.fullName);
        // Store complete object
        DataStore_1.dataStore.setValue(`${prefix}.complete`, formData);
        return formData;
    }
    /**
     * Retrieve stored form data
     * @param prefix - Storage prefix (default: 'formData')
     * @returns The stored form data object or null if not found
     */
    static getStoredData(prefix = 'formData') {
        return DataStore_1.dataStore.getValue(`${prefix}.complete`);
    }
    /**
     * Get a specific field from stored form data
     * @param field - The field name (firstName, lastName, companyName, email, phone)
     * @param prefix - Storage prefix (default: 'formData')
     * @returns The field value or undefined if not found
     */
    static getField(field, prefix = 'formData') {
        return DataStore_1.dataStore.getValue(`${prefix}.${field}`);
    }
    /**
     * Check if form data exists in storage
     * @param prefix - Storage prefix (default: 'formData')
     * @returns True if form data exists, false otherwise
     */
    static hasStoredData(prefix = 'formData') {
        return DataStore_1.dataStore.hasKey(`${prefix}.complete`);
    }
    /**
     * Clear stored form data
     * @param prefix - Storage prefix (default: 'formData')
     */
    static clearStoredData(prefix = 'formData') {
        const fields = ['firstName', 'lastName', 'companyName', 'email', 'phone', 'fullName', 'complete'];
        fields.forEach(field => {
            DataStore_1.dataStore.removeValue(`${prefix}.${field}`);
        });
    }
    /**
     * Generate form data with custom overrides and store it
     * @param overrides - Object with field overrides
     * @param prefix - Storage prefix (default: 'formData')
     * @returns The generated form data object
     */
    static generateWithOverrides(overrides = {}, prefix = 'formData') {
        const firstName = overrides.firstName ?? TestDataGenerator_1.TestDataGenerator.firstName();
        const lastName = overrides.lastName ?? TestDataGenerator_1.TestDataGenerator.lastName();
        const companyName = overrides.companyName ?? TestDataGenerator_1.TestDataGenerator.companyName();
        const email = overrides.email ?? TestDataGenerator_1.TestDataGenerator.email({ first: firstName, last: lastName });
        const phone = overrides.phone ?? TestDataGenerator_1.TestDataGenerator.phone();
        const formData = {
            firstName,
            lastName,
            companyName,
            email,
            phone,
            fullName: `${firstName} ${lastName}`,
            generatedAt: new Date().toISOString()
        };
        // Store individual fields
        DataStore_1.dataStore.setValue(`${prefix}.firstName`, firstName);
        DataStore_1.dataStore.setValue(`${prefix}.lastName`, lastName);
        DataStore_1.dataStore.setValue(`${prefix}.companyName`, companyName);
        DataStore_1.dataStore.setValue(`${prefix}.email`, email);
        DataStore_1.dataStore.setValue(`${prefix}.phone`, phone);
        DataStore_1.dataStore.setValue(`${prefix}.fullName`, formData.fullName);
        // Store complete object
        DataStore_1.dataStore.setValue(`${prefix}.complete`, formData);
        return formData;
    }
}
exports.FormDataHelper = FormDataHelper;
//# sourceMappingURL=FormDataHelper.js.map